<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Boost Log Library Documentation</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body>
<a href="../../../index.htm">
<img align="left" src="../../../c++boost.gif" alt="C++ Boost">
</a>  

<h1>Boost Log Library Documentation</h1>
<p>
<h3 align="center">Version 1.4</h3>
<hr>
<p><b>Manipulating logs</b></p>
<p><font face="Courier New, Courier, mono"><b><font size="-1" color="#0000FF">Header 
  to include: <br>
  #include &lt;boost/log/functions.hpp&gt;<br>
  </font><font face="Courier New, Courier, mono"><b><font size="-1" color="#0000FF">// 
  for extra manipulator/appender functions, which depend on at least one other 
  Boost library</font></b></font><font size="-1" color="#0000FF"> <br>
  #include 
  &lt;boost/log/extra/some_other_header.hpp&gt; </font></b></font></p>
<p></p>
<p>When manipulating logs, you alway manipulate a <a href="logs.html#hierarchy">hierarchy 
  of logs</a>. You can:</p>
<ul>
  <li> add modifiers/appenders</li>
  <li>delete modifiers/appenders</li>
  <li>set the logs' level</li>
</ul>
<p>To mainpulate a hierarchy of logs, first create it, and then you can chain 
  calls on it, like this:</p>
<pre class="code">
manipulate_logs("some_hierarchy")
	.method1(arg11,arg12,...)
	.method2(arg21,arg22,...)
	...;
</pre>

Example:
<pre class="code">
manipulate_logs("*")
    .add_modifier(prepend_time("$hh:$mm:$ss "), DEFAULT_INDEX + 1 )
    .add_modifier(&prepend_prefix)
    .add_appender(&write_to_cout);
</pre>
<a name="add">
<p><b>Adding modifiers/appenders</b></p></a>
<p>To add a modifier, to syntax is:</p>
<ul>
  <li><font face="Courier New, Courier, mono">.add_modifier( func, index, name);</font></li>
  <li><font face="Courier New, Courier, mono">.add_modifier( func, index);</font> 
    equivalent to .add_modifier(func, index, &quot;&quot;)</li>
  <li><font face="Courier New, Courier, mono">.add_modifier( func, name);</font> 
    equivalent to .add_modifier(func, boost::log::DEFAULT_INDEX, name) </li>
  <li><font face="Courier New, Courier, mono">.add_modifier( func);</font> equivalent 
    to .add_modifier(func, boost::log::DEFAULT_INDEX, &quot;&quot;);</li>
</ul>
<p>The <i>index </i>insures partial ordering amongst modifier functions. That 
  is, in case for a log, you have multiple modifiers, you might want modifier 
  A to be called before modifier B. The common scenario is, for instance, if you 
  want to print messages prefixed by their log name, and by time. If you did not 
  have ordering, this could happen:</p>
<pre class="code">
BOOST_LOG(info) << "I just wanted to tell you something....";
// Could generate this:
23:45:40 [info] I just wanted to tell you something....
// Or this:
[info] 23:45:40 I just wanted to tell you something....
</pre>
<p>You'll certainly want the former: the modifier that prepends the log name should 
  be called before the modifier that prepends the time. Here's how to do it:</p>
<pre class="code">
manipulate_logs(&quot;*&quot;)
  // prepend the time, but make sure this is the LAST function called
  .add_modifier(prepend_time("$hh:$mm:$ss "), std::numeric_limits&lt;int&gt;::max() )
  .add_modifier("*", prepend_prefix);
</pre>
<p>Note that if modifier functions A and B have the <i>same </i>index, they way 
  they get called is unspecified (you don't know for sure if A is called before 
  B, or vice-versa).</p>
<p>&nbsp;</p>
<p>The <i>name </i>can associate a modifier func with a certain name. This is 
  only useful if you might want to later delete this modifier func. For example:</p>
<pre class="code">
// prepend time, and name this modifier as "time"
manipulate_logs(&quot;*&quot;)
  .add_modifier(prepend_time("$hh:$mm:$ss "), "time" );
  
// at a later time
BOOST_LOG(app) << "this is prefixed by time";
manipulate_logs(&quot;*&quot;)
  .del_modifier("time");
BOOST_LOG(app) << "this is NOT prefixed by time";
</pre>
<p>&nbsp;</p>
<p>To add an appender, to syntax is:</p>
<ul>
  <li><font face="Courier New, Courier, mono">.add_appender( func, index, name);</font></li>
  <li><font face="Courier New, Courier, mono">.add_appender( func, index);</font> 
    equivalent to .add_appender(func, index, &quot;&quot;)</li>
  <li><font face="Courier New, Courier, mono">.add_appender( func, name);</font> 
    equivalent to .add_appender(func, boost::log::DEFAULT_INDEX, name) </li>
  <li><font face="Courier New, Courier, mono">.add_appender( func);</font> equivalent 
    to .add_appender(func, boost::log::DEFAULT_INDEX, &quot;&quot;);</li>
</ul>
<p>This <i>index </i>and <i>name </i>are same as for modifiers. Example:</p>
<pre class="code">
manipulate_logs("*")
    .add_appender(&write_to_cout);    // all messages are written to cout
    .add_appender(&write_to_dbg_wnd); // all messages written to Debug window
</pre>
Note that the Boost Log Library comes with a set of predefined <a href="predefined.html">Appender/Modifier 
functions</a>.
<p>&nbsp;</p>
<a name="del">
<p><b>Deleting manipulators/appenders</b></p></a>
<p>First of all, in order to be able to delete a manipulator and/or appender, 
  you should have named them first (see below). Syntax:</p>
<ul>
  <li><font face="Courier New, Courier, mono">.del_modifier( name);</font></li>
  <li><font face="Courier New, Courier, mono">.del_appender( name);</font></li>
</ul>
<p>Note that you can have multiple modifiers having the same name. In case you 
  choose to delete that name (by calling <i>.del_modifier</i>), all these modifiers 
  will be deleted. Same goes for <i>.del_appender</i>.</p>
<pre class="code">
manipulate_logs(&quot;*&quot;)
  .del_modifier("time")
  .del_appender("cout");
</pre>
<p>&nbsp;</p>
<a name="level">
<p><b>Setting the log's level</b></p></a>
<p>When you set a log's level, every message that gets written to that log, that 
  has a level higher or equal to the log's level, gets written to the log. Otherwise, 
  it's ignored.</p>
<p>Syntax:</p>
<ul>
  <li><font face="Courier New, Courier, mono">.enable( log_level);</font></li>
  <li><font face="Courier New, Courier, mono">.enable();</font> equivalent to 
    .enable(::boost::logging::level::default_); </li>
  <li><font face="Courier New, Courier, mono">.disable(); </font>equivalent to 
    .enable(::boost::logging::level::disable_all); </li>
</ul>
<p>First of all, note that every level resides in the ::boost::logging::level 
  namespace. Examples:</p>
<pre class="code">
// set the "app.*" logs' level to default_ 
manipulate_logs("app.*").enable();

// set the "*.gui.*" logs' level to enable_all
manipulate_logs("*.gui.*").enable( boost::logging::level::enable_all);

// disable the log whose name is "socks"
manipulate_logs("socks").disable();
</pre>
<p>&nbsp;</p>
<a name="predefined">
<p><b>Predefined levels</b></p> </a>
<p>Here are the predefined levels:</p>
<ul>
  <li><i>info </i>(1000)</li>
  <li><i>warn</i> (1200)</li>
  <li><i>dbg</i> (1400)</li>
  <li><i>err</i> (1600)</li>
  <li><i>fatal</i> (2000)</li>
  <li><i>disable_all </i>(UINT_MAX)</li>
  <li><i>default_</i> (1000)</li>
  <li><i>enable_all </i>(0)</li>
</ul>
<p>You can define your own level, like this:</p>
<pre class="code">
// defining
BOOST_LOG_DEFINE_LEVEL(my_error, 1650)

// using in code
BOOST_LOGL(app,my_error) << "Too many users!";

// manipulating logs
manipulate_logs("*").enable( boost::logging::level::my_error);

</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<hr>
<small>
Copyright <a href="mailto:john&#64;torjo.com">John Torjo</a> &copy; 2004
</small>

</body>
</html>
