#summary New Linux build instructions
#labels Tutorial

The instructions below are for the svn version of the code starting Nov. 2009.

= Building on Linux =

== Getting Ready ==
 * Required packages:
   * Blas and lapack. This is also probably just a matter of finding the appropriate package for your linux.
   * flex and bison. These are frequently already installed if you have the various pieces of the development environment installed
   * The following are required if you are planning on using the Python wrappers:
      * The python headers. This probably means that you need to install the python-dev package (or whatever it's called) for your linux distribution.
      * sqlite3. You also need the shared libraries. This may require that you install a sqlite3-dev package.
      * You need to have numpy (http://www.scipy.org/NumPy) installed.

== Installing Boost ==
  * download the boost source distribution from [http://www.boost.org the boost web site]
  * extract the source to a _non-temporary_ location on your machine, you're going to need it to build the RDKit as well as boost. (e.g. `/usr/local/src/boost_1_40_0`)
  * The following are required if you are planning on using the Python wrappers:
    * build and install the required boost shared libraries: 
     * `cd $BOOST`
     * Building on 32 bit systems: `bjam  --with-thread --with-python release install`
     * Building on 64 bit systems: `bjam  --with-thread --with-python address-model=64 release install`

    If you have any problems with this step, check the boost [http://www.boost.org/more/getting_started/unix-variants.html installation instructions].

== Building the Code ==
  * follow the Installing Boost instructions above.
  * environment variables:
    * RDBASE: the root directory of the RDKit distribution (e.g. ~/RDKit)
    * LD_LIBRARY_PATH: make sure it includes $RDBASE/bin and wherever the boost shared libraries were installed
    * The following are required if you are planning on using the Python wrappers:
      * PYTHON_ROOT: wherever python is installed (e.g. /usr)
      * PYTHON_VERSION: the first two digits of the python version (e.g. 2.5, *not* 2.5.1)
      * PYTHONPATH: make sure it includes $RDBASE
  * Building: 
    * cd to $RDBASE
    * `mkdir build`
    * `cd build`
    * `cmake ..`
    * `make`
  this builds all libraries, regression tests, and wrappers (by default). This command will generate a lot of text (mostly compiler warnings), but it should not generate any errors. At the end you should *not* see any messages about failed or skipped targets. 
    * `make install`

== Testing the Build (optional, but recommended) ==
  * cd to $RDBASE/build and do `ctest`
  * create the databases used by the Python tests, requires sqlite3 to be installed:
    * `sqlite3 $RDBASE/Data/RDTests.sqlt < $RDBASE/rdkit/Dbase/test_data/RDTests.sqlite`
    * `sqlite3 $RDBASE/Data/RDData.sqlt < $RDBASE/rdkit/Dbase/test_data/RDData.sqlite`
  * cd to $RDBASE/Python and do: `python $RDBASE/rdkit/TestRunner.py test_list.py`
  * cd to $RDBASE/Projects and do: `python $RDBASE/rdkit/TestRunner.py test_list.py`