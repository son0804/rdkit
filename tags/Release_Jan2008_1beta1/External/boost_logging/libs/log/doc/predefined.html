<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Boost Log Library Documentation</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body>
<a href="../../../index.htm">
<img align="left" src="../../../c++boost.gif" alt="C++ Boost">
</a>  

<h1>Boost Log Library Documentation</h1>
<p>
<h3 align="center">Version 1.4</h3>
<hr>
<p><b>Predefined Modifier/ Appender functions</b></p>
<p><font face="Courier New, Courier, mono"><b><font size="-1" color="#0000FF">Header 
  to include: <br>
  #include &lt;boost/log/functions.hpp&gt;<br>
  </font><font face="Courier New, Courier, mono"><b><font size="-1" color="#0000FF">// 
  for extra functions, which depend on at least one other Boost library</font></b></font><font size="-1" color="#0000FF"> 
  <br>
  #include &lt;boost/log/extra/some_other_header.hpp&gt; </font></b></font></p>
<p></p>
<p>The following are modifiers/appenders that are predefined in the Boost Log 
  library.</p>
<p><b>Modifiers</b></p>
<ul>
  <li><i>prepend_prefix</i>: prepends the name of the log to the message</li>
  <li><i>append_enter</i>: appends an enter if it does not already exist</li>
  <li><i>prepend_time(format)</i>: prepends the time the message was written at, 
    in a given format (see below)</li>
  <li><i>prepend_time_strf(format)</i>: prepends the time the message was written 
    at, using <i>std::strftime</i> function</li>
  <li><i>prepend_thread_id</i>: prepends the thread ID to the message (Windows 
    Only)</li>
</ul>
<p>For prepend_time, the format is a string which can contain escape sequences:</p>
<ul>
  <li><i>$dd</i> - day, 2 digits</li>
  <li><i>$MM</i> - month, 2 digits</li>
  <li><i>$yy</i> - year, 2 digits</li>
  <li><i>$yyyy</i> - year, 4 digits</li>
  <li><i>$hh</i> - hour, 2 digits</li>
  <li><i>$mm</i> - minute, 2 digits</li>
  <li><i>$ss</i> - second, 2 digits<br>
  </li>
</ul>
<p>For example:</p>
<ul>
  <li>&quot;Today is $yyyy/$dd of $MM&quot; will write the time like &quot;Today 
    is 2004/30 of 06&quot;</li>
  <li>&quot;[$hh:$mm.$ss] &quot; will write time like &quot;[23:56.49] &quot;</li>
</ul>
<p>&nbsp;</p>
<a name="log">
<p><b>Appenders</b></p>
</a> 
<ul>
  <li><i>write_to_dbg_wnd</i>: writes to the Output Debug Window (Windows Only)</li>
  <li><i>write_to_file(file_name [,do_overwrite = true])</i>: appends to a certain 
    file. Note that it does not keep the file open - for each write, it opens, 
    writes, closes the file.</li>
  <li><i>ts_appender(functor [,sleep_ms = 100])</i>: <br>
    <font color="#0000FF"><b><font face="Courier New, Courier, mono">#include 
    &lt;boost/log/extra/functions_ts.hpp&gt;</font></b></font><br>
    writes messages in a <b>thread-safe</b> manner <b>very efficiently </b>- on 
    a dedicated thread. Every message is cached, and once in a while (once at 
    <i>sleep_ms </i>milliseconds), the dedicated thread writes all messages at 
    once - by calling the passed <i>functor</i>. 
    <p>The functor must have the following <i>appender</i> prototype: '<font face="Courier New, Courier, mono">void 
      appender(const std::string &amp; log_name, const std::string &amp; msg);</font>'<br>
      Note that you can use <i>write_to_file</i> as a functor to pass to ts_appender. 
      Also, since multiple messages can be cached before calling the appender 
      (coming from multiple logs), when forwarding the message to the appender 
      functor, the log_name will always be an empty string (otherwise, implementation 
      would become much more complex).<br>
    </p>
  </li>
  <li><i>appender_array() [.add(func1) [.add(func2) [add...]]]</i>: creates an 
    appender functor that forwards the message to an array of appenders. This 
    is useful when used together with <i>ts_appender</i>.</li>
  <li><i>rolling_file_appender(log_file_name, max_size, files_count)</i><br>
    <font face="Courier New, Courier, mono" color="#0000FF"><b>#include &lt;boost/log/extra/rolling_file_appender.hpp&gt;</b></font><br>
    Creates a &quot;rotating&quot; log. It writes to <i>log_file_name</i>, until 
    it reaches max_size. Then, it writes to <i>log_file_name</i>.1, <i>log_file_name</i>.2,..., 
    <i>log_file_name</i>.<i>files_count</i> and then starts all over.. </li>
  <li><i>periodic_file_appender(log_file_name, period_secs, filename_factory)</i><br>
    <font face="Courier New, Courier, mono" color="#0000FF"><b>#include &lt;boost/log/extra/periodic_file_appender.hpp&gt;</b></font><br>
    Writes to <i>log_file_name</i>, for the given period (in seconds). Whenever 
    the period ends, it uses filename_factory to generate a new file name. Then, 
    it opens and writes to that file. <br>
    The syntax of filename_factory is:<br>
    <i>string factory_func(const string &amp; log_file_name);</i><br>
    We've provided such a factory: <font face="Courier New, Courier, mono">filename_factory_strftime</font> 
  </li>
  <li><i>shared_memory_appender(name, mem_size = 2Mb)</i><br>
    <font face="Courier New, Courier, mono" color="#0000FF"><b>#include &lt;boost/log/extra/shared_memory.hpp&gt;</b></font><br>
    It logs messages to a shared memory zone, having the given <i>name</i>, using 
    IPC (Inter Process Communication). It uses the <i>shmem </i>library, provided 
    by Ion Gaztanaga. <br>
    <br>
  </li>
</ul>
<p>&nbsp;</p>
<p><b>Examples</b></p>
<pre class="code">
// App log only:
// thread-safe write to console, each half a second - on a dedicated thread
void write_to_cout(const std::string & msg) { std::cout << msg; }
manipulate_logs("app").add_appender( ts_appender(write_to_cout, 500) );

// All Logs:
// thread-safe write to file "out.txt", every 100 ms - on a dedicated thread
manipulate_logs("*").add_appender( ts_appender( write_to_file("out.txt") ) );

// Or, 
// thread-safe write to file "out.txt" AND to cout, 
// every 100 ms - on a dedicated thread
manipulate_logs("*").add_appender( ts_appender( 
    appender_array().add( write_to_file("out.txt") ).add( write_to_cout) );



manipulate_logs("app.*").add_appender(write_to_dbg_wnd);

manipulate_logs("*")
  .add_modifier( prepend_prefix)
  .add_modifier( prepend_time( "$hh:$mm:$ss "));
</pre>
<p>&nbsp;</p>
<p>FIXME explain that appender/modifier context data should not change - or use 
  boost::shared_ptr.TOTHINK</p>
<p>&nbsp;</p>
<hr>
<small>
Copyright <a href="mailto:john&#64;torjo.com">John Torjo</a> &copy; 2004
</small>

</body>
</html>
